{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Home This documentation covers everything I learned when setting up Home Assistant as a self-hosted security system. It will cover the following: Home Assistant ZigBee Amazon Alexa Cameras (Eufy, Hikvision, and Blue Iris) Each section of the documentation will contain the approprate icon from the above list to make it clear what technology the section is focused on. If you enjoy it, you can find my other work or get in touch on the following platforms: My Tech Blog Linkedin Twitter GitHub","title":"Home"},{"location":"#home","text":"This documentation covers everything I learned when setting up Home Assistant as a self-hosted security system. It will cover the following: Home Assistant ZigBee Amazon Alexa Cameras (Eufy, Hikvision, and Blue Iris) Each section of the documentation will contain the approprate icon from the above list to make it clear what technology the section is focused on. If you enjoy it, you can find my other work or get in touch on the following platforms: My Tech Blog Linkedin Twitter GitHub","title":"Home"},{"location":"alarm-component/","text":"Alarm Component This section covers the Home Assistant alarm control panel called Manual and other alarm devices such as door and motion sensors. Device Groups Home Assistant Groups are used to group similar devices together, for example, all motion sensors. Alarm use cases We will create groups to allow us to: Make sure devices are online such as motion and door sensors Check that all our doors are closed when we arm the alarm Check cameras and other alarms are armed correctly Check if everyone is home or not Security health check lovelace dashboard Creating groups First add a configuration block. configuration.yaml # Add a groups section group : !include groups.yaml Then create the groups in the groups.yaml file. groups.yaml # We can check this group to see if the house is empty all_away : name : All Away entities : - person.jim - person.jill icon : mdi:airplane-takeoff # For checking all security sensors are online security_sensors : name : Security Sensors entities : - binary_sensor.garage_motion - binary_sensor.deck_motion - binary_sensor.back_door - binary_sensor.front_door # For checking if all doors are closed security_doors : name : Security Doors entities : - binary_sensor.back_door - binary_sensor.front_door # For checking all our lights are online security_lights : name : Security Lights entities : - light.garden - light.driveway # For checking if all our alarms are armed correctly security_alarms : name : Security Alarms entities : - alarm_control_panel.alexa_guard - alarm_control_panel.eufy_homebase Checking sensors are online For this use case, we will check that all of the security sensors in the group group.security_sensors group are online and responding correctly according to Home Assistant. To do this, we will create a Template Sensor . Make sure you have a template include in your Home Assistant configuration. configuration.yaml # Add a groups section template : !include template.yaml Now add a template, which will count the amount of senors with the attribute unavailable , unknown or none , which will tell us if they are online or not. template.yaml - sensor : - name : \"Unavailable Security Sensors\" unique_id : \"unavailable_security_sensors\" # Checks the state of each security sensor, if its online, it adds it to a list, then we count the list. state : \"{{ expand('group.security_sensors')|selectattr('state','in',['unavailable','unknown','none'])|list|count }}\" icon : > {% if states(\"sensor.unavailable_security_sensors\")|int > 0 %} mdi:eye-remove-outline {% else %} mdi:eye-check-outline {% endif %} Checking doors are closed This Template Sensor counts the number of open windows or doors in the group group.security_doors . template.yaml - sensor : - name : \"Open Doors and Windows\" unique_id : \"open_doors_windows\" # Returns 0 if no doors or windows are open state : \"{{ expand('group.security_doors')|selectattr('state','in',['on'])|list|count }}\" icon : > {% if states(\"sensor.open_doors_windows\")|int > 0 %} mdi:lock-open-outline {% else %} mdi:door-closed-lock {% endif %} Checking other alarms In my home I have other devices that are represented in alarms in Home Assistant, including an Amazon Echo Dot with Alexa Guard and some Eufy Cameras . When I arm the Home Assistant alarm, these are also meant to be armed. This Template Sensor checks all alarms / cameras in the group.security_alarms group: If the HA alarm is armed_away or armed_night , all of them should be armed_away If the HA alarm is is not armed_away or armed_night , all of them should be either armed_home or disarmed template.yaml - sensor : - name : \"Incorrectly Armed Cameras / Alarms\" unique_id : \"incorrectly_armed_cameras_and_alarms\" state : > {% if is_state('alarm_control_panel.ha_alarm', 'armed_night') or is_state('alarm_control_panel.ha_alarm', 'armed_away') %} {{ expand('group.security_alarms')|list|count - expand('group.security_alarms')|selectattr('state','in',['armed_away'])|list|count }} {% else %} {{ expand('group.security_alarms')|list|count - expand('group.security_alarms')|selectattr('state','in',['disarmed', 'armed_home'])|list|count }} {% endif %} icon : > {% if states(\"sensor.incorrectly_armed_cameras_alarms\")|int > 0 %} mdi:cctv-off {% else %} mdi:cctv {% endif %} Security health check Using the data from our other template sensors, we can determine if our security devices are all as expected, and decide if our overall security health is a PASS or FAIL template.yaml - sensor : - name : \"Security Health Check\" unique_id : \"security_health_check\" state : > {% if states('sensor.unavailable_security_sensors')|int > 0 or states('sensor.unavailable_security_lights')|int > 0 or states('sensor.open_doors_windows')|int > 0 or states('sensor.incorrectly_armed_cameras_alarms')|int > 0 %} FAIL {% else %} PASS {% endif %} icon : > {% if is_state(\"sensor.security_health_check\", \"FAIL\") %} mdi:shield-alert-outline {% else %} mdi:shield-lock-outline {% endif %}","title":"Alarm Component"},{"location":"alarm-component/#alarm-component","text":"This section covers the Home Assistant alarm control panel called Manual and other alarm devices such as door and motion sensors.","title":"Alarm Component"},{"location":"alarm-component/#device-groups","text":"Home Assistant Groups are used to group similar devices together, for example, all motion sensors.","title":" Device Groups"},{"location":"alarm-component/#alarm-use-cases","text":"We will create groups to allow us to: Make sure devices are online such as motion and door sensors Check that all our doors are closed when we arm the alarm Check cameras and other alarms are armed correctly Check if everyone is home or not Security health check lovelace dashboard","title":"Alarm use cases"},{"location":"alarm-component/#creating-groups","text":"First add a configuration block. configuration.yaml # Add a groups section group : !include groups.yaml Then create the groups in the groups.yaml file. groups.yaml # We can check this group to see if the house is empty all_away : name : All Away entities : - person.jim - person.jill icon : mdi:airplane-takeoff # For checking all security sensors are online security_sensors : name : Security Sensors entities : - binary_sensor.garage_motion - binary_sensor.deck_motion - binary_sensor.back_door - binary_sensor.front_door # For checking if all doors are closed security_doors : name : Security Doors entities : - binary_sensor.back_door - binary_sensor.front_door # For checking all our lights are online security_lights : name : Security Lights entities : - light.garden - light.driveway # For checking if all our alarms are armed correctly security_alarms : name : Security Alarms entities : - alarm_control_panel.alexa_guard - alarm_control_panel.eufy_homebase","title":"Creating groups"},{"location":"alarm-component/#checking-sensors-are-online","text":"For this use case, we will check that all of the security sensors in the group group.security_sensors group are online and responding correctly according to Home Assistant. To do this, we will create a Template Sensor . Make sure you have a template include in your Home Assistant configuration. configuration.yaml # Add a groups section template : !include template.yaml Now add a template, which will count the amount of senors with the attribute unavailable , unknown or none , which will tell us if they are online or not. template.yaml - sensor : - name : \"Unavailable Security Sensors\" unique_id : \"unavailable_security_sensors\" # Checks the state of each security sensor, if its online, it adds it to a list, then we count the list. state : \"{{ expand('group.security_sensors')|selectattr('state','in',['unavailable','unknown','none'])|list|count }}\" icon : > {% if states(\"sensor.unavailable_security_sensors\")|int > 0 %} mdi:eye-remove-outline {% else %} mdi:eye-check-outline {% endif %}","title":"Checking sensors are online"},{"location":"alarm-component/#checking-doors-are-closed","text":"This Template Sensor counts the number of open windows or doors in the group group.security_doors . template.yaml - sensor : - name : \"Open Doors and Windows\" unique_id : \"open_doors_windows\" # Returns 0 if no doors or windows are open state : \"{{ expand('group.security_doors')|selectattr('state','in',['on'])|list|count }}\" icon : > {% if states(\"sensor.open_doors_windows\")|int > 0 %} mdi:lock-open-outline {% else %} mdi:door-closed-lock {% endif %}","title":"Checking doors are closed"},{"location":"alarm-component/#checking-other-alarms","text":"In my home I have other devices that are represented in alarms in Home Assistant, including an Amazon Echo Dot with Alexa Guard and some Eufy Cameras . When I arm the Home Assistant alarm, these are also meant to be armed. This Template Sensor checks all alarms / cameras in the group.security_alarms group: If the HA alarm is armed_away or armed_night , all of them should be armed_away If the HA alarm is is not armed_away or armed_night , all of them should be either armed_home or disarmed template.yaml - sensor : - name : \"Incorrectly Armed Cameras / Alarms\" unique_id : \"incorrectly_armed_cameras_and_alarms\" state : > {% if is_state('alarm_control_panel.ha_alarm', 'armed_night') or is_state('alarm_control_panel.ha_alarm', 'armed_away') %} {{ expand('group.security_alarms')|list|count - expand('group.security_alarms')|selectattr('state','in',['armed_away'])|list|count }} {% else %} {{ expand('group.security_alarms')|list|count - expand('group.security_alarms')|selectattr('state','in',['disarmed', 'armed_home'])|list|count }} {% endif %} icon : > {% if states(\"sensor.incorrectly_armed_cameras_alarms\")|int > 0 %} mdi:cctv-off {% else %} mdi:cctv {% endif %}","title":"Checking other alarms"},{"location":"alarm-component/#security-health-check","text":"Using the data from our other template sensors, we can determine if our security devices are all as expected, and decide if our overall security health is a PASS or FAIL template.yaml - sensor : - name : \"Security Health Check\" unique_id : \"security_health_check\" state : > {% if states('sensor.unavailable_security_sensors')|int > 0 or states('sensor.unavailable_security_lights')|int > 0 or states('sensor.open_doors_windows')|int > 0 or states('sensor.incorrectly_armed_cameras_alarms')|int > 0 %} FAIL {% else %} PASS {% endif %} icon : > {% if is_state(\"sensor.security_health_check\", \"FAIL\") %} mdi:shield-alert-outline {% else %} mdi:shield-lock-outline {% endif %}","title":"Security health check"},{"location":"alexa-guard/","text":"Amazon Alexa \ud83d\udea7 Coming Soon","title":"Amazon Alexa"},{"location":"alexa-guard/#amazon-alexa","text":"\ud83d\udea7 Coming Soon","title":"Amazon Alexa"},{"location":"automations/","text":"Automations \ud83d\udea7 Coming Soon","title":"Automations"},{"location":"automations/#automations","text":"\ud83d\udea7 Coming Soon","title":"Automations"},{"location":"blue-iris/","text":"Blue Iris \ud83d\udea7 Coming Soon","title":"Blue Iris"},{"location":"blue-iris/#blue-iris","text":"\ud83d\udea7 Coming Soon","title":"Blue Iris"},{"location":"esphome/","text":"ESPHome \ud83d\udea7 Coming Soon","title":"ESPHome"},{"location":"esphome/#esphome","text":"\ud83d\udea7 Coming Soon","title":"ESPHome"},{"location":"eufy/","text":"Eufy Cameras \ud83d\udea7 Coming Soon","title":"Eufy Cameras"},{"location":"eufy/#eufy-cameras","text":"\ud83d\udea7 Coming Soon","title":"Eufy Cameras"},{"location":"notifications/","text":"Notifications \ud83d\udea7 Coming Soon","title":"Notifications"},{"location":"notifications/#notifications","text":"\ud83d\udea7 Coming Soon","title":"Notifications"},{"location":"zigbee/","text":"Zigbee \ud83d\udea7 Coming Soon Setting the Zigbee Channel ZigBee device groups","title":"Zigbee"},{"location":"zigbee/#zigbee","text":"\ud83d\udea7 Coming Soon Setting the Zigbee Channel ZigBee device groups","title":"Zigbee"}]}